
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>It’s declarative &#8212; Validol  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Context-specific validation" href="context_specific_validation.html" />
    <link rel="prev" title="The Why" href="the_why.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="it-s-declarative">
<h1>It’s declarative<a class="headerlink" href="#it-s-declarative" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-declarative">
<h2>What is declarative?<a class="headerlink" href="#what-is-declarative" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://medium.com/front-end-weekly/imperative-versus-declarative-code-whats-the-difference-adc7dd6c8380">https://medium.com/front-end-weekly/imperative-versus-declarative-code-whats-the-difference-adc7dd6c8380</a></p>
<p>Declarative code describes, or declares, what the desired result should look like. At the same time, it doesn’t explicitly
specify the steps needed to reach its goal.
Wikipedia has a bit more formal definition, yet still readable:
Declarative programming is a programming paradigm — a style of building the structure and elements of computer programs — that expresses the logic of a computation without describing its control flow.</p>
<p>As we see, declarative programming has nothing to do with the language. You can use dense imperative code in Haskell. You can write declarative code in PHP.</p>
<p>It does have something to do with you though.</p>
<p>Quick example of declarative and imperative code, deliberately in pseudo-code. Unit here is a main building block in your language of choice.
Typically, it’s either a class or a function.</p>
<p>Here is a declarative one:</p>
<dl class="docutils">
<dt>unit sum {</dt>
<dd>(int a, int b) =&gt; a + b</dd>
</dl>
<p>}</p>
<p>Why is it declarative in the first place? Because only a desired result is described, which is a sum. You can implement it by a number of ways,
not only by addition.</p>
<p>Nevertheless, when one needs a sum, the following code is typical:</p>
<dl class="docutils">
<dt>unit add {</dt>
<dd>(int a, int b) =&gt; a + b</dd>
</dl>
<p>}</p>
<p>What a big deal, just a different name, you might say. But naming is what reflects your way of thinking.
Hence, there is a small difference in this situation, where we have only two basic programming units. And it’s huge
when we have 1 million lines of code.</p>
</div>
<div class="section" id="the-consequences-of-being-imperative-on-a-bigger-scale">
<h2>The consequences of being imperative on a bigger scale<a class="headerlink" href="#the-consequences-of-being-imperative-on-a-bigger-scale" title="Permalink to this headline">¶</a></h2>
<p>How do your user stories (or Application services, or Controllers) look like? I bet you recognize the following pattern:</p>
<ol class="arabic simple">
<li>Validate a request</li>
<li>Send some http request</li>
<li>Parse response</li>
<li>Update some entity</li>
<li>Save it in a database</li>
</ol>
<p>Quick declarativeness test: you API changes, 3rd party API changes either, including the number and format of requests,
thus parsing logic changes, consequently entity update logic does either, and finally, however crazy, you DB vendor changes.
Does you controller code have to change? If yes – bad news, sorry: your code is probably imperative. I hope you have controller tests in place.
But chances are you don’t. Anyways, you’re facing a changes that affect a significant area of your codebase.</p>
<p>Declarative approach helps you mitigate those issues. First, you don’t have to validate the request. You just need a <em>validated</em> request.
Second, you don’t have to send an http request and parse its response. Instead, you need either a command result [<a class="reference external" href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/CommandMessage.html">https://www.enterpriseintegrationpatterns.com/patterns/messaging/CommandMessage.html</a>]
(like whether the transaction authorization was successful or not) or particular data (like special marketing offer for current client).
And finally you don’t have to update an entity and save it in database; instead you want it persisted.</p>
<p>So as a result we get the following list of expressions:
1. Validated request
2. Information about either successfulness or remote entity data
3. Persisted local object as a result</p>
<p>There are no implementation details left on this user-story level. Thus, your design will be subjected to less changes
in case of any requirement changes. The scope of changes will be smaller, which means more readable and maintainable code.</p>
<p>Declarative code probably can be considered as a special case of encapsulation.
But there are plenty of ways to organize your classes in such a way that encapsulation is respected. Declarative code is
both encapsulated and descriptive, contrary to prescriptive.</p>
</div>
<div class="section" id="what-declarative-is-not">
<h2>What declarative is not?<a class="headerlink" href="#what-declarative-is-not" title="Permalink to this headline">¶</a></h2>
<p>One of the miconceptions I see quite often is that the fact that you’ve put all your dependencies in a config file automatically makes your code declarative.
Nope. Declarative code is much more than mechanical actions. Simply sticking your service classes [<a class="reference external" href="https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html">https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html</a>]
in a config file won’t bring you closer to maintainable code.</p>
</div>
<div class="section" id="declarative-validation">
<h2>Declarative validation<a class="headerlink" href="#declarative-validation" title="Permalink to this headline">¶</a></h2>
<p>Class names reflect what is validated, not how. Their implementation doesn’t clutter the higher-level validation logic description.
To get a feel of what it looks like, here is a quick example:</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>
</pre></div>
</td></tr></table></div>
<dl class="docutils">
<dt>::</dt>
<dd><dl class="first docutils">
<dt>new FastFail&lt;&gt;(</dt>
<dd><dl class="first docutils">
<dt>new WellFormedJson(</dt>
<dd>new Unnamed&lt;&gt;(Either.right(new Present&lt;&gt;(this.jsonRequestString)))</dd>
</dl>
<p>),
requestJsonObject -&gt;</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>new UnnamedBlocOfNameds&lt;&gt;(</dt>
<dd><dl class="first docutils">
<dt>List.of(</dt>
<dd><dl class="first docutils">
<dt>new FastFail&lt;&gt;(</dt>
<dd><dl class="first docutils">
<dt>new IsJsonObject(</dt>
<dd><dl class="first docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“guest”, requestJsonObject)</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p>),
guestJsonObject -&gt;</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>new NamedBlocOfNameds&lt;&gt;(</dt>
<dd><p class="first">“guest”,
List.of(</p>
<blockquote>
<div><dl class="docutils">
<dt>new AsString(</dt>
<dd><dl class="first docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“email”, guestJsonObject)</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p>),
new AsString(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“name”, guestJsonObject)</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
<p class="last">),
Guest.class</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</dd>
</dl>
<p>),
new FastFail&lt;&gt;(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“items”, requestJsonObject)</dd>
</dl>
<p>),
itemsJsonElement -&gt;</p>
<blockquote>
<div><dl class="docutils">
<dt>new NamedBlocOfUnnameds&lt;&gt;(</dt>
<dd><p class="first">“items”,
itemsJsonElement,
item -&gt;</p>
<blockquote>
<div><dl class="docutils">
<dt>new UnnamedBlocOfNameds&lt;&gt;(</dt>
<dd><dl class="first docutils">
<dt>List.of(</dt>
<dd><dl class="first docutils">
<dt>new AsInteger(</dt>
<dd><dl class="first docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“id”, item)</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p class="last">),
Item.class</p>
</dd>
</dl>
<p>),</p>
</div></blockquote>
<p class="last">Items.class</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</div></blockquote>
<p>),
new FastFail&lt;&gt;(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“delivery”, requestJsonObject)</dd>
</dl>
<p>),
deliveryJsonElement -&gt;</p>
<blockquote>
<div><dl class="docutils">
<dt>new SwitchTrue&lt;&gt;(</dt>
<dd><p class="first">“delivery”,
List.of(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Specific&lt;&gt;(</dt>
<dd><p class="first">() -&gt; true,
new UnnamedBlocOfNameds&lt;&gt;(</p>
<blockquote>
<div><dl class="docutils">
<dt>List.of(</dt>
<dd><dl class="first docutils">
<dt>new FastFail&lt;&gt;(</dt>
<dd><p class="first">new IndexedValue(“where”, deliveryJsonElement),
whereJsonElement -&gt;</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>new NamedBlocOfNameds&lt;&gt;(</dt>
<dd><p class="first">“where”,
List.of(</p>
<blockquote>
<div><dl class="docutils">
<dt>new AsString(</dt>
<dd><dl class="first docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“street”, whereJsonElement)</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p>),
new AsInteger(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“building”, whereJsonElement)</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
<p class="last">),
Where.class</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</dd>
</dl>
<p>),
new FastFail&lt;&gt;(</p>
<blockquote>
<div><p>new IndexedValue(“when”, deliveryJsonElement),
whenJsonElement -&gt;</p>
<blockquote>
<div><dl class="docutils">
<dt>new NamedBlocOfNameds&lt;&gt;(</dt>
<dd><p class="first">“when”,
List.of(</p>
<blockquote>
<div><dl class="docutils">
<dt>new AsDate(</dt>
<dd><dl class="first docutils">
<dt>new AsString(</dt>
<dd><dl class="first docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“date”, whenJsonElement)</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p class="last">),
new SimpleDateFormat(“yyyy-MM-dd HH:mm:ss”)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p class="last">),
DefaultWhen.class</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
<p>),
CourierDelivery.class</p>
</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</div></blockquote>
<p>),
new AsInteger(</p>
<blockquote>
<div><dl class="docutils">
<dt>new Required(</dt>
<dd>new IndexedValue(“source”, requestJsonObject)</dd>
</dl>
<p>)</p>
</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
<p class="last">),
OrderRegistrationRequestData.class</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</dd>
</dl>
<dl class="last docutils">
<dt>)</dt>
<dd>.result()</dd>
</dl>
</dd>
</dl>
<p>It’s especially convenient in case of complex json data structures.
Your validation composite object reflects the request structure.
And as a nice declarative-approach side-effect, your code is not temporally coupled [<a class="reference external" href="https://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/">https://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/</a>].</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Validol</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">It’s declarative</a></li>
<li class="toctree-l1"><a class="reference internal" href="context_specific_validation.html">Context-specific validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="extendable_validation.html">Infinitely-extendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="the_why.html">The Why</a></li>
<li class="toctree-l1"><a class="reference internal" href="the_how.html">The How</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="the_why.html">The Why</a><ul>
      <li>Previous: <a href="the_why.html" title="previous chapter">The Why</a></li>
      <li>Next: <a href="context_specific_validation.html" title="next chapter">Context-specific validation</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Vadim Samokhin.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/declarative_validation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>