

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to validate json schema in Java? &mdash; Validol  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What is the best Java email address validation method?" href="what_is_the_best_java_email_address_validation_method.html" />
    <link rel="prev" title="What is the best way to validate a json request in Java?" href="what_is_the_best_way_to_validate_json_request_in_java.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Validol
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Validol Quick start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quick_start.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start.html#the-whole-validation-from-a-bird-s-view">The whole validation from a bird’s view</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start.html#line-by-line-analysis">Line-by-line analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start.html#learn-by-doing">Learn by doing!</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../the_why.html">Why Validol?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../the_why.html#it-s-declarative">It’s declarative</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the_why.html#it-s-contextual">It’s contextual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the_why.html#it-s-infinitely-extendable">It’s infinitely extendable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the_why.html#it-s-re-usable">It’s re-usable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../the_why.html#no-magic-and-hidden-dependencies">No magic and hidden dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../http_status_codes_for_failed_validation.html">HTTP status codes for failed validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../http_status_codes_for_failed_validation.html#final-and-non-final-errors">Final and non-final errors</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">FAQ</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="how_to_validate_a_json_object_in_java.html">How to validate a JSON object in java?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how_to_validate_a_json_object_in_java.html#request-validation">Request validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_validate_a_json_object_in_java.html#response-validation">Response validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_validate_a_json_object_in_java.html#validate-json-anywhere">Validate json anywhere</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_validate_a_json_object_in_java.html#what-to-use-for-json-validation">What to use for json validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how_to_perform_validation_in_java.html">How to perform validation in Java?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how_to_perform_validation_in_java.html#first-put-it-into-a-particular-scenario-the-one-you-re-validating">First, put it into a particular scenario – the one you’re validating</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how_to_perform_validation_in_java.html#quick-example">Quick example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how_to_perform_validation_in_java.html#do-it-declaratively">Do it declaratively</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="what_is_the_best_way_to_validate_json_request_in_java.html">What is the best way to validate a json request in Java?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="what_is_the_best_way_to_validate_json_request_in_java.html#problem">Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="what_is_the_best_way_to_validate_json_request_in_java.html#how-not-to-do-it">How not to do it</a></li>
<li class="toctree-l2"><a class="reference internal" href="what_is_the_best_way_to_validate_json_request_in_java.html#solution">Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="what_is_the_best_way_to_validate_json_request_in_java.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to validate json schema in Java?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#problems">Problems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#validation-is-often-an-imperative-code-clutter">Validation is often an imperative code-clutter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#json-schema-could-be-not-so-desirable-to-deal-with">JSON Schema could be not so desirable to deal with</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#solution">Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="what_is_the_best_java_email_address_validation_method.html">What is the best Java email address validation method?</a></li>
</ul>
<p class="caption"><span class="caption-text">Inspired by</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../inspired_by/declarative_validation.html">Declarative validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/declarative_validation.html#what-is-declarative">What is declarative?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/declarative_validation.html#the-consequences-of-being-imperative-on-a-bigger-scale">The consequences of being imperative on a bigger scale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/declarative_validation.html#what-declarative-is-not">What declarative is not?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/declarative_validation.html#id1">Declarative validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/declarative_validation.html#more-examples">More examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../inspired_by/context_specific_validation.html">Contextual validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/context_specific_validation.html#context-independent-validation-bound-to-data-model">Context-independent validation bound to data-model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/context_specific_validation.html#arguably-better-context-independent-validation-in-domain-objects">Arguably better: context-independent validation in domain objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inspired_by/context_specific_validation.html#contextual-validation-that-is-specific-to-a-concrete-user-story">Contextual validation that is specific to a concrete user story</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Validol</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>How to validate json schema in Java?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/faq/how_to_parse_and_validate_json_schema_in_java.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-validate-json-schema-in-java">
<h1>How to validate json schema in Java?<a class="headerlink" href="#how-to-validate-json-schema-in-java" title="Permalink to this headline">¶</a></h1>
<p>In this entry, we’ll consider typical problems that arise when you’re setting off parsing json with following validation.
At the end of it, I’ll show how you can do it in concise and declarative fashion with
<a class="reference external" href="https://github.com/wrong-about-everything/Validol">Validol</a> library.</p>
<div class="section" id="problems">
<h2>Problems<a class="headerlink" href="#problems" title="Permalink to this headline">¶</a></h2>
<p>Parsing JSON is usually a no-brainer. There are at least a couple of great libraries that do that:
<a class="reference external" href="https://github.com/FasterXML/jackson">Jackson</a> and <a class="reference external" href="https://github.com/google/gson">GSON</a>. The problem is that
there seems to be no nice way to combine them with validation facility. That’s where the following problems unfold.</p>
<div class="section" id="validation-is-often-an-imperative-code-clutter">
<h3>Validation is often an imperative code-clutter<a class="headerlink" href="#validation-is-often-an-imperative-code-clutter" title="Permalink to this headline">¶</a></h3>
<p>Typically, json schema validation looks like a huge,
<a class="reference external" href="https://enterprisecraftsmanship.com/posts/temporal-coupling-and-immutability/">highly temporally coupled</a>
sequence of imperative instructions. In library-independent java-like pseudo-code, it looks like the following:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">JsonObject</span> <span class="n">jsonObject</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">jsonObject</span><span class="o">.</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;guest&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;guest block is required&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">jsonObject</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;guest&quot;</span><span class="o">).</span><span class="na">has</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;guest name is required&quot;</span><span class="o">);</span>
<span class="o">}</span>

<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">jsonObject</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;guest&quot;</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">70</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;guest name must be shorter than 70 characters&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;guest name must be at least 3 characters&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;[a-Z]+&quot;</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="n">name</span><span class="o">).</span><span class="na">matches</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">error</span><span class="o">(</span><span class="s">&quot;guest name must contain only alpha characters&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="json-schema-could-be-not-so-desirable-to-deal-with">
<h3>JSON Schema could be not so desirable to deal with<a class="headerlink" href="#json-schema-could-be-not-so-desirable-to-deal-with" title="Permalink to this headline">¶</a></h3>
<p>Those who want to break free from this imperative spaghetti hell often turn to quite complicated and intricate beast called
<a class="reference external" href="https://json-schema.org/latest/json-schema-core.html">JSON Schema</a>. It’s a specification describing the structure and
validation rules of json documents. Besides having a steep learning curve, it is a little bit too verbose.
And things get worse quickly: JSON schema definition file grows twice as fast as the validated json itself.</p>
<p>Among the pluses, this format is a declarative one, which is a huge step forward comparing to the previous option.
And there are <a class="reference external" href="https://github.com/java-json-tools/json-schema-validator">couple</a> of <a class="reference external" href="https://github.com/everit-org/json-schema">libraries</a> supporting it.</p>
</div>
</div>
<div class="section" id="solution">
<h2>Solution<a class="headerlink" href="#solution" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/wrong-about-everything/Validol">Validol</a> provides both parsing and validating capabilities, as well as solves both validation problems: it is <a class="reference internal" href="../inspired_by/declarative_validation.html"><span class="doc">declarative</span></a> and concise.</p>
<p>Check out a quick example. Suppose we have a registration request. It has a couple of blocks, <code class="docutils literal notranslate"><span class="pre">payment</span></code> being one of them.
For brevity sake, I’ll put only this one in the request:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s">&quot;payment&quot;</span><span class="o">:{</span>
        <span class="s">&quot;expires_at&quot;</span><span class="o">:</span><span class="s">&quot;12/29&quot;</span><span class="o">,</span>
        <span class="s">&quot;card_number&quot;</span><span class="o">:</span><span class="mi">12345612341234</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Here is how the actual validation code looks like:</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValidatedRegistrationRequest</span> <span class="kd">implements</span> <span class="n">Validatable</span><span class="o">&lt;</span><span class="n">RegistrationRequest</span><span class="o">&gt;</span>
<span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">jsonRequestString</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Connection</span> <span class="n">dbConnection</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ValidatedRegistrationRequest</span><span class="o">(</span><span class="n">String</span> <span class="n">jsonRequestString</span><span class="o">,</span> <span class="n">Connection</span> <span class="n">dbConnection</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jsonRequestString</span> <span class="o">=</span> <span class="n">jsonRequestString</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dbConnection</span> <span class="o">=</span> <span class="n">dbConnection</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Result</span><span class="o">&lt;</span><span class="n">RegistrationRequest</span><span class="o">&gt;</span> <span class="nf">result</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="o">{</span>
        <span class="k">return</span>
            <span class="k">new</span> <span class="n">FastFail</span><span class="o">&lt;&gt;(</span>
                <span class="k">new</span> <span class="n">WellFormedJson</span><span class="o">(</span>
                    <span class="k">new</span> <span class="n">Unnamed</span><span class="o">&lt;&gt;(</span><span class="n">Either</span><span class="o">.</span><span class="na">right</span><span class="o">(</span><span class="k">new</span> <span class="n">Present</span><span class="o">&lt;&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">jsonRequestString</span><span class="o">)))</span>
                <span class="o">),</span>
                <span class="n">requestJsonObject</span> <span class="o">-&gt;</span>
                    <span class="k">new</span> <span class="n">UnnamedBlocOfNameds</span><span class="o">&lt;&gt;(</span>
                        <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
                            <span class="k">new</span> <span class="n">FastFail</span><span class="o">&lt;&gt;(</span>
                                <span class="k">new</span> <span class="n">IsJsonObject</span><span class="o">(</span>
                                    <span class="k">new</span> <span class="n">Required</span><span class="o">(</span>
                                        <span class="k">new</span> <span class="n">IndexedValue</span><span class="o">(</span><span class="s">&quot;payment&quot;</span><span class="o">,</span> <span class="n">requestJsonObject</span><span class="o">)</span>
                                    <span class="o">)</span>
                                <span class="o">),</span>
                                <span class="n">paymentJsonObject</span> <span class="o">-&gt;</span>
                                    <span class="k">new</span> <span class="n">NamedBlocOfNameds</span><span class="o">&lt;&gt;(</span>
                                        <span class="s">&quot;payment&quot;</span><span class="o">,</span>
                                        <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
                                            <span class="k">new</span> <span class="n">CardIsNotExpired</span><span class="o">(</span>
                                                <span class="k">new</span> <span class="n">AsString</span><span class="o">(</span>
                                                    <span class="k">new</span> <span class="n">Required</span><span class="o">(</span>
                                                        <span class="k">new</span> <span class="n">IndexedValue</span><span class="o">(</span><span class="s">&quot;expires_at&quot;</span><span class="o">,</span> <span class="n">paymentJsonObject</span><span class="o">)</span>
                                                    <span class="o">)</span>
                                                <span class="o">)</span>
                                            <span class="o">),</span>
                                            <span class="k">new</span> <span class="n">CardNumberIsNotBlacklisted</span><span class="o">(</span>
                                                <span class="k">new</span> <span class="n">CardNumberSatisfiesLuhnAlgorithm</span><span class="o">(</span>
                                                    <span class="k">new</span> <span class="n">Required</span><span class="o">(</span>
                                                        <span class="k">new</span> <span class="n">IndexedValue</span><span class="o">(</span><span class="s">&quot;card_number&quot;</span><span class="o">,</span> <span class="n">paymentJsonObject</span><span class="o">)</span>
                                                    <span class="o">)</span>
                                                <span class="o">),</span>
                                                <span class="k">this</span><span class="o">.</span><span class="na">dbConnection</span>
                                            <span class="o">)</span>
                                        <span class="o">),</span>
                                        <span class="n">Payment</span><span class="o">.</span><span class="na">class</span>
                                    <span class="o">)</span>
                            <span class="o">)</span>
                        <span class="o">),</span>
                        <span class="n">RegistrationRequest</span><span class="o">.</span><span class="na">class</span>
                    <span class="o">)</span>
            <span class="o">)</span>
                <span class="o">.</span><span class="na">result</span><span class="o">()</span>
            <span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Let’s see what’s going on here, line by line:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">1</span></code> Declaration of <code class="docutils literal notranslate"><span class="pre">ValidatedRegistrationRequest</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">6</span></code> Its constructor accepts not yet parsed json string. It might come from an incoming request, from received response, or from pretty much anywhere else.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">13</span></code>: Validation starts when this method is invoked.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Lines</span> <span class="pre">16</span></code>: The higher-level validation object is <code class="docutils literal notranslate"><span class="pre">FastFail</span></code> block. If the first argument is invalid, an error is returned right away.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Lines</span> <span class="pre">17-19</span></code>: json is checked whether it’s well-formed or not. If the latter, validation fails fast and returns a corresponding error.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">20</span></code>: if json is well-formed, a closure is invoked, and json data is passed as its single argument.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">21</span></code>: json data is validated. Its structure is an unnamed block of named blocks. It corresponds to a JSON Object.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">26</span></code>: The first (and the only) block is called <code class="docutils literal notranslate"><span class="pre">payment</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">25</span></code>: It’s required.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">24</span></code>: It must be a json object.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">23</span></code>: If not, an error will be returned right away because it’s a <code class="docutils literal notranslate"><span class="pre">FailFast</span></code> object.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">29</span></code>: Otherwise, a closure is invoked.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">30</span></code>: Payment block is a named block consisting of other named entries – objects or scalars.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">36</span></code>: The first one is called <code class="docutils literal notranslate"><span class="pre">expires_at</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">35</span></code>: It’s required.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">34</span></code>: And represented as a string.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">33</span></code>: Finally, check that it’s not expired.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">43</span></code>: Second parameter is called <code class="docutils literal notranslate"><span class="pre">card_number</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">42</span></code>: It’s required as well.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">41</span></code>: It must satisfy Luhn algorithm.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">40</span></code>: And it should not be blacklisted in our database, hence …</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">46</span></code>:  … <code class="docutils literal notranslate"><span class="pre">this.dbConnection</span></code> parameter.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">49</span></code>: If all previous validation checks are successful, an object of class <code class="docutils literal notranslate"><span class="pre">Payment</span></code> is created.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Line</span> <span class="pre">53</span></code>: Finally, <code class="docutils literal notranslate"><span class="pre">RegistrationRequest</span></code> is created and returned.</div>
</div>
<p>Here is how a calling code looks when validation is successful:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Result</span><span class="o">&lt;</span><span class="n">RegistrationRequest</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ValidatedRegistrationRequest</span><span class="o">(</span><span class="n">jsonRequestString</span><span class="o">).</span><span class="na">result</span><span class="o">();</span>
<span class="n">result</span><span class="o">.</span><span class="na">isSuccessful</span><span class="o">();</span>
<span class="n">result</span><span class="o">.</span><span class="na">value</span><span class="o">().</span><span class="na">raw</span><span class="o">().</span><span class="na">payment</span><span class="o">().</span><span class="na">cardNumber</span><span class="o">();</span> <span class="c1">// 12345612341234</span>
</pre></div>
</div>
</div>
<div class="section" id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<p>For more detailed example, check out Validol’s <a class="reference internal" href="../quick_start.html"><span class="doc">quick-start</span></a> entry.
Also, there are plenty of <a class="reference external" href="https://github.com/wrong-about-everything/Validol/tree/master/src/test/java/example">higher-level unit tests</a>.
And finally feel free to contribute!</p>
<p>/<a href="#id2"><span class="problematic" id="id3">*</span></a>1 <a href="#id4"><span class="problematic" id="id5">*</span></a>/new FastFail&lt;&gt;(
/<a href="#id6"><span class="problematic" id="id7">*</span></a>2 <a href="#id8"><span class="problematic" id="id9">*</span></a>/    new IsJsonObject(
/<a href="#id10"><span class="problematic" id="id11">*</span></a>3 <a href="#id12"><span class="problematic" id="id13">*</span></a>/        new WellFormedJson(
/<a href="#id14"><span class="problematic" id="id15">*</span></a>4 <a href="#id16"><span class="problematic" id="id17">*</span></a>/            new IndexedValue(“when”, jsonString)</p>
<blockquote>
<div><blockquote>
<div>)</div></blockquote>
<p>),</p>
</div></blockquote>
<p>/<em>7 */    whenJsonElement -&gt;
/*8 */        new NamedBlocOfNameds&lt;&gt;(
/*9 */            “when”,
/*10</em>/            List.of(
/<em>11</em>/                new RestaurantIsAbleToDeliverBySpecifiedTime(
/<em>12</em>/                    new IsGreaterThan(
/<em>13</em>/                        new AsDate(
/<em>14</em>/                            new AsString(
/<em>15</em>/                                new Required(
/<em>16</em>/                                    new IndexedValue(“datetime”, whenJsonElement)</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div>)</div></blockquote>
<p>)</p>
</div></blockquote>
<p>),</p>
</div></blockquote>
<dl class="docutils">
<dt>/<em>20</em>/                        new Now().value()</dt>
<dd>),</dd>
<dt>/<em>22</em>/                    this.dbConnection</dt>
<dd><blockquote class="first">
<div>)</div></blockquote>
<p class="last">),</p>
</dd>
<dt>/<em>25</em>/            When.class</dt>
<dd><blockquote class="first">
<div>)</div></blockquote>
<dl class="last docutils">
<dt>)</dt>
<dd>.result();</dd>
</dl>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="what_is_the_best_java_email_address_validation_method.html" class="btn btn-neutral float-right" title="What is the best Java email address validation method?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="what_is_the_best_way_to_validate_json_request_in_java.html" class="btn btn-neutral float-left" title="What is the best way to validate a json request in Java?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Vadim Samokhin (samokhinvadim at gmail dot com)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-165581170-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>